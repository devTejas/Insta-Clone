(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(13),r=n.n(a),l=(n(19),n(2)),i=n(3),o=n(6),u=(n(20),n(5)),d=n.n(u),j=n(0),h=function(){var e=Object(c.useContext)(L),t=e.state,n=e.dispatch,s=Object(i.f)();return Object(j.jsx)("div",{className:"navbar-fixed",children:Object(j.jsx)("nav",{children:Object(j.jsxs)("div",{className:"nav-wrapper white",children:[Object(j.jsx)(o.b,{to:t?"/":"/all",className:"brand-logo left",children:Object(j.jsx)("span",{style:{color:"salmon"},children:"Instagram"})}),Object(j.jsxs)("ul",{id:"nav-mobile",style:{display:"flex"},className:"right",children:[Object(j.jsx)("li",{children:Object(j.jsx)(o.b,{to:"/all",children:"All Posts"})}),!t&&Object(j.jsxs)("div",{children:[Object(j.jsx)("li",{children:Object(j.jsx)(o.b,{to:"/signin",children:"SignIn"})}),Object(j.jsx)("li",{children:Object(j.jsx)(o.b,{to:"/signup",children:"Signup"})})]}),t&&Object(j.jsxs)("div",{children:[Object(j.jsx)("li",{children:Object(j.jsx)(o.b,{to:"/profile/".concat(null===t||void 0===t?void 0:t._id),children:"Profile"})}),Object(j.jsx)("li",{children:Object(j.jsx)(o.b,{to:"/create",children:"Upload"})}),Object(j.jsx)("li",{children:Object(j.jsx)("a",{className:"btn #c62828 red darken-3",onClick:function(){localStorage.clear(),n({type:"CLEAR"}),0===localStorage.length&&d.a.toast({html:"User logged out!",classes:"green"}),s("/all")},children:"LogOut"})})]})]})]})})})},b=n(9),f=(n(23),function(){return Object(j.jsx)("div",{className:"content_loading",children:Object(j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100px",height:"100px",viewBox:"0 0 100 100",className:"content_loading_animation",children:[Object(j.jsx)("circle",{cx:"30",cy:"50",children:Object(j.jsx)("animate",{attributeName:"r",values:"0;5;0",dur:"1.2s",repeatCount:"indefinite"})}),Object(j.jsx)("circle",{cx:"50",cy:"50",children:Object(j.jsx)("animate",{attributeName:"r",values:"0;5;0",dur:"1.2s",begin:"0.4s",repeatCount:"indefinite"})}),Object(j.jsx)("circle",{cx:"70",cy:"50",children:Object(j.jsx)("animate",{attributeName:"r",values:"0;5;0",dur:"1.2s",begin:"0.8s",repeatCount:"indefinite"})})]})})}),p=n(14);var O=function(e,t){var n;return function(){var c=this,s=arguments;clearTimeout(n),n=setTimeout((function(){return e.call.apply(e,[c].concat(Object(p.a)(s)))}),t)}},m=(n(24),function(e){var t=e._id,n=e.postedBy,s=n._id,a=n.name,r=e.photo,u=e.title,h=e.body,b=e.likes,f=e.comments,p=e.postLikedByUser,m=void 0!==p&&p,x=Object(c.useState)(m),v=Object(l.a)(x,2),g=v[0],N=v[1],y=Object(c.useState)(b.length),w=Object(l.a)(y,2),S=w[0],C=w[1],k=Object(c.useState)(f.reverse()),I=Object(l.a)(k,2),_=I[0],P=I[1],B=Object(c.useState)(!1),E=Object(l.a)(B,2),A=E[0],T=E[1],F=(Object(i.f)(),Object(c.useContext)(L).state),U=O((function(){try{fetch("/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))},body:JSON.stringify({postId:t,postLiked:g})}).then((function(e){return e.json()})).then((function(e){if(null===e||void 0===e?void 0:e.error)throw null===e||void 0===e?void 0:e.error;z(null===e||void 0===e?void 0:e.likes)})).catch((function(e){console.log(e),d.a.toast({html:e,classes:"red"})}))}catch(e){console.log(e),d.a.toast({html:e,classes:"red"})}}),500),z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=e.findIndex((function(e){return e===(null===F||void 0===F?void 0:F._id)}));N(t>=0),C(e.length)},D=O((function(){try{fetch("/deletepost/".concat(t),{method:"delete",headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){var t=e.message;T(!0),d.a.toast({html:t,classes:"green"})}))}catch(e){console.log(e),d.a.toast({html:e,classes:"red"})}}),500);return Object(c.useEffect)(z,[b]),!A&&Object(j.jsxs)("div",{className:"card home-card",children:[Object(j.jsxs)("h5",{children:[Object(j.jsx)(o.b,{to:"/profile/".concat(s),children:Object(j.jsxs)("span",{className:"postUserName",children:[" ",a]})}),(null===F||void 0===F?void 0:F._id)===s&&Object(j.jsx)("i",{className:"material-icons",style:{float:"right",cursor:"pointer"},onClick:D,children:"delete"})]}),Object(j.jsx)("div",{className:"card-image postImage",children:Object(j.jsx)("img",{src:r})}),Object(j.jsxs)("div",{className:"card-content",children:[Object(j.jsx)("h6",{className:"postTitle",children:u}),Object(j.jsxs)("p",{className:"postBody",children:[" ",h]}),Object(j.jsxs)("div",{className:"post_bottom",children:[Object(j.jsxs)("div",{className:"",children:[Object(j.jsx)("svg",{viewBox:"0 0 26 26","aria-hidden":"true",className:"post-icon",children:Object(j.jsx)("g",{children:Object(j.jsx)("path",{d:"M14.046 2.242l-4.148-.01h-.002c-4.374 0-7.8 3.427-7.8 7.802 0 4.098 3.186 7.206 7.465 7.37v3.828c0 .108.044.286.12.403.142.225.384.347.632.347.138 0 .277-.038.402-.118.264-.168 6.473-4.14 8.088-5.506 1.902-1.61 3.04-3.97 3.043-6.312v-.017c-.006-4.367-3.43-7.787-7.8-7.788zm3.787 12.972c-1.134.96-4.862 3.405-6.772 4.643V16.67c0-.414-.335-.75-.75-.75h-.396c-3.66 0-6.318-2.476-6.318-5.886 0-3.534 2.768-6.302 6.3-6.302l4.147.01h.002c3.532 0 6.3 2.766 6.302 6.296-.003 1.91-.942 3.844-2.514 5.176z"})})}),Object(j.jsx)("span",{children:_.length})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("svg",{viewBox:"0 0 26 26","aria-hidden":"true",className:g?"iconLiked like-icon":"like-icon",style:{cursor:"".concat(F?"":"not-allowed")},onClick:F&&U,children:Object(j.jsx)("g",{children:Object(j.jsx)("path",{d:"M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12z"})})}),Object(j.jsx)("span",{children:S})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("svg",{viewBox:"0 0 26 26","aria-hidden":"true",className:"post-icon",children:Object(j.jsxs)("g",{children:[Object(j.jsx)("path",{d:"M17.53 7.47l-5-5c-.293-.293-.768-.293-1.06 0l-5 5c-.294.293-.294.768 0 1.06s.767.294 1.06 0l3.72-3.72V15c0 .414.336.75.75.75s.75-.336.75-.75V4.81l3.72 3.72c.146.147.338.22.53.22s.384-.072.53-.22c.293-.293.293-.767 0-1.06z"}),Object(j.jsx)("path",{d:"M19.708 21.944H4.292C3.028 21.944 2 20.916 2 19.652V14c0-.414.336-.75.75-.75s.75.336.75.75v5.652c0 .437.355.792.792.792h15.416c.437 0 .792-.355.792-.792V14c0-.414.336-.75.75-.75s.75.336.75.75v5.652c0 1.264-1.028 2.292-2.292 2.292z"})]})}),Object(j.jsx)("span",{})]})]}),Object(j.jsxs)("div",{className:"commentsSection",children:[Object(j.jsx)("p",{className:"",children:"Comments"}),_.map((function(e){var t=e._id,n=e.text,c=e.postedBy,s=c._id,a=c.name;return Object(j.jsxs)("div",{className:"commentItem",children:[Object(j.jsx)(o.b,{to:"/profile/".concat(s),children:Object(j.jsx)("h6",{className:"postUserName",children:a})}),Object(j.jsx)("h6",{children:n})]},t)}))]}),F?Object(j.jsx)("form",{className:"sendComment",onSubmit:function(e){var n,c;e.preventDefault(),n=e.target[0].value,c=t,fetch("/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))},body:JSON.stringify({postId:c,text:n})}).then((function(e){return e.json()})).then((function(e){return P(e.comments)})).catch((function(e){return console.log(e)})),e.target[0].value=""},children:Object(j.jsx)("input",{type:"text",placeholder:"add a comment"})}):Object(j.jsx)(j.Fragment,{children:"Login to comment!"})]})]},t)}),x=(n(25),function(){var e=Object(c.useState)(null),t=Object(l.a)(e,2),n=t[0],s=t[1];return Object(c.useEffect)((function(){fetch("/allpost",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){return s(e.posts.reverse())}))}),[]),Object(j.jsx)("div",{className:"home",children:n?Object(j.jsx)(j.Fragment,{children:null===n||void 0===n?void 0:n.map((function(e){return Object(j.jsx)(m,Object(b.a)({},e),e._id)}))}):Object(j.jsx)(f,{})})}),v=n(4),g=n.n(v),N=n(7),y=(n(27),function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),r=Object(l.a)(a,2),o=r[0],u=r[1],h=Object(c.useState)(null),b=Object(l.a)(h,2),f=b[0],p=b[1],O=Object(c.useState)(null),m=Object(l.a)(O,2),x=m[0],v=m[1],y=Object(i.f)(),w=function(){var e=Object(N.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("file",f),t.append("upload_preset","insta-clone"),t.append("cloud_name","pleasecontrol"),e.next=6,fetch("https://api.cloudinary.com/v1_1/pleasecontrol/image/upload",{method:"post",body:t}).then((function(e){return e.json()})).then((function(e){return e.secure_url})).catch((function(e){throw console.log(e),e}));case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(N.a)(g.a.mark((function e(){var t,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n&&o&&f){e.next=3;break}throw{error:"Please add all the Fields"};case 3:return e.next=5,w();case 5:t=e.sent,fetch("/createpost",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))},body:JSON.stringify({title:n,body:o,photo:t})}).then((function(e){return e.json()})).then((function(e){e.error?d.a.toast({html:e.error,classes:"#c62828 red darken-3"}):(d.a.toast({html:"Success",classes:"green"}),y("/"))})),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),c=e.t0.error,console.log(c),d.a.toast({html:c,classes:"#c62828 red darken-3"});case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsxs)("div",{className:"card input-field uploadFileCard",children:[Object(j.jsxs)("div",{className:"",style:{textAlign:"left"},children:[Object(j.jsxs)("label",{className:"inputLabel",children:["Title",Object(j.jsx)("input",{type:"text",placeholder:"Title",value:n,onChange:function(e){return s(e.target.value)}})]}),Object(j.jsxs)("label",{className:"inputLabel",children:["Body",Object(j.jsx)("textarea",{type:"text",placeholder:"Body",defaultValue:o,onChange:function(e){return u(e.target.value)}})]})]}),Object(j.jsxs)("div",{className:"file-field input-field",children:[Object(j.jsxs)("div",{className:"btn #64b5f6 blue darken-1",children:[Object(j.jsx)("span",{children:"Upload Image"}),Object(j.jsx)("input",{type:"file",accept:".png, .jpeg, .jpg, .gif",onChange:function(e){return function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(e){return v(e.target.result)},p(e)}(e.target.files[0])}})]}),Object(j.jsx)("div",{className:"file-path-wrapper",children:Object(j.jsx)("input",{type:"text",className:"file-path validate"})})]}),Object(j.jsx)("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-1",onClick:S,children:"Submit Post"})]}),Object(j.jsx)("img",{src:x,alt:"",className:"uploadedImage"})]})}),w=(n(28),function(){var e=Object(c.useState)((function(){return!0})),t=Object(l.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)({userFollowingPosts:null,userNotFollowingPosts:null}),r=Object(l.a)(a,2),i=r[0],o=i.userFollowingPosts,u=i.userNotFollowingPosts,d=r[1],h=Object(c.useContext)(L).state;return Object(c.useEffect)((function(){h&&fetch("/allpost").then((function(e){return e.json()})).then((function(e){var t=e.posts;if(h){var n=[],c=[];t.reverse().forEach((function(e){(null===h||void 0===h?void 0:h.following.findIndex((function(t){var n;return(null===e||void 0===e||null===(n=e.postedBy)||void 0===n?void 0:n._id)===t})))>-1?n.push(e):c.push(e)})),d({userFollowingPosts:n,userNotFollowingPosts:c}),s(!1)}}))}),[h]),Object(j.jsx)("div",{className:"home",children:n?Object(j.jsx)(f,{}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"",children:[Object(j.jsxs)("p",{style:{textAlign:"center"},className:"",children:[!o.length&&o.length," Posts from people you are following!"]}),null===o||void 0===o?void 0:o.map((function(e){return Object(j.jsx)(m,Object(b.a)({},e),e._id)}))]}),Object(j.jsxs)("div",{style:{borderTop:"1px solid gray"},className:"",children:[Object(j.jsx)("p",{style:{textAlign:"center"},className:"",children:"Posts from people you are not following!"}),null===u||void 0===u?void 0:u.map((function(e){return Object(j.jsx)(m,Object(b.a)({},e),e._id)}))]})]})})}),S=(n(29),function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(!0),r=Object(l.a)(a,2),i=r[0],o=(r[1],Object(c.useContext)(L)),u=o.state,d=(o.dispatch,function(){var e=Object(N.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/mypost",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){var t;return s(null===e||void 0===e||null===(t=e.myPosts)||void 0===t?void 0:t.reverse())}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(c.useEffect)((function(){return d()}),[]),Object(j.jsx)(j.Fragment,{children:i?Object(j.jsxs)("div",{className:"profile",children:[Object(j.jsxs)("div",{className:"profileContainer",children:[Object(j.jsx)("div",{className:"profileImage",children:Object(j.jsx)("img",{src:"/sirsourav.jpg",alt:"Person Image"})}),Object(j.jsxs)("div",{className:"profileDescription",children:[Object(j.jsx)("h4",{children:null===u||void 0===u?void 0:u.name}),Object(j.jsxs)("div",{className:"",children:[Object(j.jsxs)("h6",{children:[n.length," Posts"]}),Object(j.jsx)("h6",{children:"40 Followers"}),Object(j.jsx)("h6",{children:"40 Following"})]})]})]}),Object(j.jsx)("div",{className:"gallery",children:null===n||void 0===n?void 0:n.map((function(e){return Object(j.jsx)("div",{className:"itemContainer",children:Object(j.jsx)("img",{className:"item",src:e.photo,alt:""})},e._id)}))}),!(null===n||void 0===n?void 0:n.length)&&Object(j.jsx)("h2",{className:"noPostsText",children:"NO POSTS TO DISPLAY!"})]}):Object(j.jsx)(f,{})})}),C=function(e,t){if(!e||!t)throw new Error("Please fill all the fields");if(!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e))throw new Error("Enter valid email");if(t.length<6)throw new Error("Password cannot be less than 6 characters!")},k=function(){var e=Object(N.a)(g.a.mark((function e(t,n,c,s){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(n,c),e.next=4,fetch("/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,email:n,password:c,imgURL:s})}).then((function(e){return e.json()})).then(function(){var e=Object(N.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=4;break}throw t.error;case 4:return e.next=6,I(n,c);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,c,s){return e.apply(this,arguments)}}(),I=function(){var e=Object(N.a)(g.a.mark((function e(t,n,c){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c||C(t,n),e.next=4,fetch("/signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n,guestUser:c})}).then((function(e){return e.json()})).then((function(e){var t=e.token,n=e.user,c=e.error;if(c)throw c;return localStorage.setItem("jwt",t),localStorage.setItem("user",JSON.stringify(n)),{error:c}}));case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,c){return e.apply(this,arguments)}}(),_=function(){var e=Object(c.useContext)(L),t=(e.state,e.dispatch,Object(c.useState)("")),n=Object(l.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)(""),u=Object(l.a)(r,2),h=u[0],b=u[1],f=Object(i.f)(),p=function(){var e=Object(N.a)(g.a.mark((function e(){var t,n,c,a=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],e.prev=1,e.next=4,I(s,h,t);case 4:if(n=e.sent,!(c=n.error)){e.next=8;break}throw c;case 8:d.a.toast({html:"Signed in successfully!",classes:"green"}),f("/"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),d.a.toast({html:e.t0,classes:"#c62828 red darken-3"});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"container signUpContainer",children:Object(j.jsx)("div",{className:"mycard",children:Object(j.jsxs)("div",{className:"card auth-card",children:[Object(j.jsx)("h2",{children:"Instagram"}),Object(j.jsxs)("div",{className:"",style:{textAlign:"left"},children:[Object(j.jsxs)("label",{className:"label-field",children:["Email",Object(j.jsx)("input",{className:"input-field",type:"email",placeholder:"Enter your email",value:s,onChange:function(e){return a(e.target.value)}})]}),Object(j.jsxs)("label",{className:"label-field",children:["Password",Object(j.jsx)("input",{className:"input-field",type:"password",placeholder:"Enter your password",value:h,onChange:function(e){return b(e.target.value)}})]})]}),Object(j.jsxs)("div",{className:"loginButtonsContainer",children:[Object(j.jsx)("button",{onClick:function(){return p(!1)},className:"btn waves-effect waves-light #64b5f6 blue darken-1",children:"Login"}),Object(j.jsx)("button",{className:"guestLoginBtn",onClick:function(){return p(!0)},children:"GUEST LOGIN"})]}),Object(j.jsx)(o.b,{className:"linkText",to:"/signup",children:"Don't have an account?"})]})})})},P=function(){var e=Object(c.useState)((function(){return""})),t=Object(l.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)((function(){return""})),r=Object(l.a)(a,2),u=r[0],h=r[1],b=Object(c.useState)((function(){return""})),f=Object(l.a)(b,2),p=f[0],O=f[1],m=Object(c.useState)((function(){return null})),x=Object(l.a)(m,2),v=x[0],y=x[1],w=Object(c.useState)((function(){return null})),S=Object(l.a)(w,2),C=S[0],I=S[1],_=Object(c.useState)(!1),P=Object(l.a)(_,2),B=P[0],E=P[1],A=Object(i.f)(),T=function(){var e=Object(N.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("file",C),t.append("upload_preset","insta-clone"),t.append("cloud_name","pleasecontrol"),n="",e.next=7,fetch("https://api.cloudinary.com/v1_1/pleasecontrol/image/upload",{method:"post",body:t}).then((function(e){return e.json()})).then((function(e){return e.secure_url})).catch((function(e){console.log(e),d.a.toast({html:JSON.stringify(e),classes:"red"})}));case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(N.a)(g.a.mark((function e(){var t,c,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E(!0),e.prev=1,!C){e.next=6;break}return e.next=5,T();case 5:t=e.sent;case 6:return e.next=8,k(n,u,p,t);case 8:if(c=e.sent,!(s=c.error)){e.next=12;break}throw s;case 12:d.a.toast({html:"User created & Signed In successfully!",classes:"green"}),A("/"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),E(!1),d.a.toast({html:e.t0,classes:"#c62828 red darken-3"});case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"container signUpContainer",style:{height:v&&""},children:[v&&Object(j.jsx)("img",{src:v,alt:"",className:"userImage"}),Object(j.jsx)("div",{className:"mycard",children:Object(j.jsxs)("div",{className:"card auth-card",children:[Object(j.jsx)("h2",{children:"Instagram"}),Object(j.jsxs)("div",{className:"",style:{textAlign:"left"},children:[Object(j.jsxs)("label",{className:"label-field",children:["Name",Object(j.jsx)("input",{className:"input-field",type:"text",placeholder:"Enter your Name",value:n,onChange:function(e){return s(e.target.value)},required:!0})]}),Object(j.jsxs)("label",{className:"label-field",children:["Email",Object(j.jsx)("input",{className:"input-field",type:"email",placeholder:"Enter your email",value:u,onChange:function(e){return h(e.target.value)},required:!0})]}),Object(j.jsxs)("label",{className:"label-field",children:["Password",Object(j.jsx)("input",{className:"input-field",type:"password",placeholder:"Enter your password",minLength:6,value:p,onChange:function(e){return O(e.target.value)},required:!0})]}),Object(j.jsxs)("div",{className:"file-field input-field",children:[Object(j.jsxs)("div",{className:"btn #64b5f6 blue darken-1",children:[Object(j.jsx)("span",{children:"Upload Image"}),Object(j.jsx)("input",{type:"file",accept:".png, .jpeg, .jpg, .gif",onChange:function(e){return function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(e){return y((function(){return e.target.result}))},I((function(){return e}))}(e.target.files[0])}})]}),Object(j.jsx)("div",{className:"file-path-wrapper",children:Object(j.jsx)("input",{type:"text",className:"file-path validate"})})]})]}),Object(j.jsx)("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-1",onClick:B?function(){}:F,children:B?"...":"SignUp"}),Object(j.jsx)(o.b,{className:"linkText",to:"/signin",children:"Already have an account?"})]})})]})},B=(n(30),function(){var e,t,n=Object(c.useState)(null),s=Object(l.a)(n,2),a=s[0],r=s[1],o=Object(c.useState)([]),u=Object(l.a)(o,2),h=u[0],b=u[1],p=Object(c.useState)(!0),m=Object(l.a)(p,2),x=m[0],v=m[1],y=Object(c.useState)("follow"),w=Object(l.a)(y,2),S=w[0],C=w[1],k=Object(c.useContext)(L),I=k.state,_=k.dispatch,P=Object(i.g)().userid,B=function(){var e=Object(N.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user/".concat(P)).then((function(e){return e.json()})).then((function(e){var t;b(null===e||void 0===e||null===(t=e.posts)||void 0===t?void 0:t.reverse()),r(null===e||void 0===e?void 0:e.user),v(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=O((function(e){try{fetch("/deletepost/".concat(e),{method:"delete",headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(t){var n=t.message;b(h.filter((function(t){return t._id!==e}))),d.a.toast({html:n,classes:"green"})}))}catch(t){console.log(t),d.a.toast({html:t,classes:"red"})}}),500);Object(c.useEffect)((function(){return B()}),[P]),Object(c.useEffect)((function(){var e,t=(null===a||void 0===a||null===(e=a.followers)||void 0===e?void 0:e.findIndex((function(e){return e===(null===I||void 0===I?void 0:I._id)})))>=0;C(t?"unfollow":"follow")}),[a,I]);var A=O((function(){try{fetch("/".concat(S),{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))},body:JSON.stringify({followId:P})}).then((function(e){return e.json()})).then((function(e){if(null===e||void 0===e?void 0:e.error)throw null===e||void 0===e?void 0:e.error;r(e),_({type:"UPDATE",payload:{userid:P,followState:S}}),C("follow"===S?"unfollow":"follow")}))}catch(e){d.a.toast({html:e,classes:"red"})}}),500);return Object(j.jsx)(j.Fragment,{children:x?Object(j.jsx)(f,{}):Object(j.jsxs)("div",{className:"profile",children:[Object(j.jsxs)("div",{className:"profileContainer",children:[Object(j.jsx)("div",{className:"profileImage",children:Object(j.jsx)("img",{src:null===a||void 0===a?void 0:a.imgURL,alt:"Person Image"})}),Object(j.jsxs)("div",{className:"profileDescription",children:[Object(j.jsx)("h4",{children:null===a||void 0===a?void 0:a.name}),Object(j.jsxs)("div",{className:"",children:[Object(j.jsxs)("h6",{children:[h.length," Posts"]}),Object(j.jsxs)("h6",{children:[null===a||void 0===a||null===(e=a.followers)||void 0===e?void 0:e.length," Followers"]}),Object(j.jsxs)("h6",{children:[null===a||void 0===a||null===(t=a.following)||void 0===t?void 0:t.length," Following"]})]}),P!==(null===I||void 0===I?void 0:I._id)&&Object(j.jsx)("button",{style:{cursor:"".concat(I?"":"not-allowed")},className:"btn waves-effect 64b5f6 blue darken",onClick:I&&A,children:S})]})]}),Object(j.jsx)("div",{className:"gallery",children:null===h||void 0===h?void 0:h.map((function(e){return Object(j.jsxs)("div",{className:"itemContainer",children:[(null===I||void 0===I?void 0:I._id)===P&&Object(j.jsx)("i",{className:"material-icons deleteBtn",onClick:function(){return E(e._id)},children:"delete"}),Object(j.jsx)("img",{className:"item",src:e.photo,alt:""})]},e._id)}))}),!h.length&&Object(j.jsx)("h2",{className:"noPostsText",children:"NO POSTS TO DISPLAY!"})]})})}),E=localStorage,A=function(e,t){return E.setItem(e,JSON.stringify(t))},T=(n(31),function(){var e,t,n=Object(c.useState)(null),s=Object(l.a)(n,2),a=s[0],r=s[1],u=Object(i.g)().id,h=Object(c.useContext)(L).state._id;Object(c.useEffect)((function(){fetch("/post/".concat(u)).then((function(e){return e.json()})).then((function(e){return r(e)}))}),[u]);var f=Object(c.useState)(null===a||void 0===a||null===(e=a.comments)||void 0===e?void 0:e.reverse()),p=Object(l.a)(f,2),O=p[0],x=p[1];return Object(j.jsx)("div",{className:"",children:a?Object(j.jsxs)(j.Fragment,{children:[h===(null===a||void 0===a||null===(t=a.postedBy)||void 0===t?void 0:t._id)&&Object(j.jsx)("i",{className:"material-icons",style:{float:"right",cursor:"pointer"},onClick:function(){var e=a._id;try{fetch("/deletepost/".concat(e),{method:"delete",headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(t){var n,c=t.message;(n="viewPost",JSON.parse(E.getItem(n)))[e]&&A("viewPost",{_id:null});d.a.toast({html:c,classes:"green"})}))}catch(t){console.log(t),d.a.toast({html:t,classes:"red"})}},children:"delete"}),Object(j.jsx)(m,Object(b.a)({},a),a._id),Object(j.jsxs)("div",{className:"commentsSection",children:[Object(j.jsx)("p",{className:"",children:"Comments"}),null===O||void 0===O?void 0:O.map((function(e){var t=e._id,n=e.text,c=e.postedBy.name;return Object(j.jsxs)("div",{className:"commentItem",children:[Object(j.jsx)(o.b,{to:"/",children:Object(j.jsx)("h6",{children:c})}),Object(j.jsx)("h5",{children:n})]},t)}))]}),Object(j.jsx)("form",{className:"sendComment",onSubmit:function(e){var t,n;e.preventDefault(),t=e.target[0].value,n=null===a||void 0===a?void 0:a._id,fetch("/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))},body:JSON.stringify({postId:n,text:t})}).then((function(e){return e.json()})).then((function(e){return x(e.comments)})).catch((function(e){return console.log(e)}))},children:Object(j.jsx)("input",{type:"text",placeholder:"add a comment"})})]}):Object(j.jsx)("p",{className:"",children:"Post Not found!"})})}),F=function(e,t){if("USER"===t.type)return t.payload;if("CLEAR"===t.type)return null;if("UPDATE"===t.type){var n=t.payload,c=n.userid,s=n.followState,a=e.following;return"follow"===s?a.push(c):a=a.filter((function(e){return e!==c})),A("user",Object(b.a)(Object(b.a)({},e),{},{following:a})),Object(b.a)(Object(b.a)({},e),{},{following:a})}return e},L=Object(c.createContext)(F),U=function(){var e=Object(i.f)(),t=Object(i.e)().pathname,n=Object(c.useContext)(L).dispatch;return Object(c.useEffect)((function(){var c=JSON.parse(localStorage.getItem("user"));c?(n({type:"USER",payload:c}),"/signin"!==t&&"/signup"!==t||e("/")):"/create"!==t&&"/"!==t||e("/all")}),[t]),Object(j.jsxs)(i.c,{children:[Object(j.jsx)(i.a,{path:"/signin",element:Object(j.jsx)(_,{})}),Object(j.jsx)(i.a,{path:"/signup",element:Object(j.jsx)(P,{})}),Object(j.jsx)(i.a,{exact:!0,path:"/profile",element:Object(j.jsx)(S,{})}),Object(j.jsx)(i.a,{path:"/create",element:Object(j.jsx)(y,{})}),Object(j.jsx)(i.a,{path:"/post/:id",element:Object(j.jsx)(T,{})}),Object(j.jsx)(i.a,{path:"/profile/:userid",element:Object(j.jsx)(B,{})}),Object(j.jsx)(i.a,{path:"/",element:Object(j.jsx)(w,{})}),Object(j.jsx)(i.a,{path:"/all",element:Object(j.jsx)(x,{})}),Object(j.jsx)(i.a,{path:"*",element:Object(j.jsx)(w,{})})]})};var z=function(){var e=Object(c.useReducer)(F,null),t=Object(l.a)(e,2),n=t[0],s=t[1];return Object(j.jsx)(L.Provider,{value:{state:n,dispatch:s},children:Object(j.jsxs)(o.a,{children:[Object(j.jsx)(h,{}),Object(j.jsx)(U,{})]})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,33)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};r.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(z,{})}),document.getElementById("root")),D()}},[[32,1,2]]]);
//# sourceMappingURL=main.35075947.chunk.js.map